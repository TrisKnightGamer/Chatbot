(this["webpackJsonpchatbot-react"]=this["webpackJsonpchatbot-react"]||[]).push([[0],{45:function(e,t,n){},46:function(e,t,n){},48:function(e,t,n){},52:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(7),o=n.n(r),i=(n(45),n(46),n(10)),c=n.n(i),l=n(17),u=n(11),h=n(12),m=n(14),p=n(13),d=n(88),f=n(89),g=n(90),v=n(87),b=n(61),y=(n(48),function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"formatAlign",value:function(e){return"left"===e?"flex-start":"flex-end"}},{key:"render",value:function(){var e={background:this.props.isBot?"#ecf0f1":"#2e86de",color:this.props.isBot?"black":"white"};return s.a.createElement("div",{className:"Message",style:{alignSelf:this.formatAlign(this.props.align)}},s.a.createElement(b.a,{className:"OneMessage",style:e},s.a.createElement("div",{className:"MessageContent"},s.a.createElement(v.a,{component:"p"},this.props.content))))}}]),n}(a.Component)),E=(n(52),function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).scrollToBottom=function(){a.messagesEnd.scrollIntoView()},a.state={msgList:null},a}return Object(h.a)(n,[{key:"componentDidUpdate",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return setTimeout((function(){console.log("Waiting for render message")}),750),e.next=3,fetch("http://0.0.0.0:5000/api/v1/messages");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,this.setState({msgList:n.results});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://0.0.0.0:5000/api/v1/messages");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,console.log(n),this.setState({msgList:n.results}),this.scrollToBottom();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"MessageContainer"},s.a.createElement("div",{className:"MessageList"},this.state.msgList?this.state.msgList.map((function(e,t){var n=!0===e.isBot?"left":"right";return s.a.createElement(y,{key:t,isBot:e.isBot,align:n,content:e.content})})):null,s.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(t){e.messagesEnd=t}})))}}]),n}(a.Component)),j=n(36),O=n(15),w=n(91),k=n(16),S=n.n(k);n(58);var B=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this)).state={message:"",alert:!0},a.handleEnter=a.handleEnter.bind(Object(O.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(O.a)(a)),a.onChange=a.onChange.bind(Object(O.a)(a)),a.handleButtonPress=a.handleButtonPress.bind(Object(O.a)(a)),a.handleButtonRelease=a.handleButtonRelease.bind(Object(O.a)(a)),a}return Object(h.a)(n,[{key:"handleSubmit",value:function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,this.setState({message:this.state.message.replace(/(\r\n|\n|\r)/gm,"")});case 3:if(""!==this.state.message){e.next=7;break}return e.abrupt("return");case 7:fetch("http://0.0.0.0:5000/api/v1/messages",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({content:this.state.message,isBot:!1,time:(new Date).getTime()/1e3})}).then((function(e){200===e.status?(console.log("Send message successfully"),e.json().then((function(e){console.log(e),fetch("http://0.0.0.0:5000/api/v1/messages/reply",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({content:e.content,isBot:!1,time:(new Date).getTime()/1e3})}).then((function(e){200===e.status?console.log("Wait for reply ..."):console.log("Some error occured")}))}))):console.log("Some error occured")})).then(this.setState({message:""}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleEnter",value:function(e){if(13===e.keyCode)return this.handleSubmit(e)}},{key:"onChange",value:function(e){this.setState(Object(j.a)({},e.target.name,e.target.value))}},{key:"handleButtonPress",value:function(){var e;this.state.alert?e=setTimeout((function(){return S.a.startListening({continuous:!0})}),200):clearTimeout(e)}},{key:"handleButtonRelease",value:function(){this.setState({alert:!1})}},{key:"render",value:function(){return S.a.browserSupportsSpeechRecognition()?s.a.createElement("div",{className:"SendMessageForm"},s.a.createElement("div",{className:"chat-input-width-100"},s.a.createElement("form",{className:"MessageForm",onKeyUp:this.handleEnter},s.a.createElement(w.a,{name:"message",id:"outlined-multiline-static",fullWidth:!1,multiline:!0,rows:"4",value:this.state.message,placeholder:"Type something here",className:"chat-input",style:{width:"925px"},margin:"normal",variant:"outlined",onChange:this.onChange}),s.a.createElement("img",{src:"voice.png",alt:"button",onTouchStart:this.handleButtonPress,onTouchEnd:S.a.stopListening,onMouseDown:this.handleButtonPress,onMouseUp:S.a.stopListening,onMouseLeave:S.a.stopListening,style:{height:"30px",width:"30px",marginTop:"15px"}}),s.a.createElement("p",{hidden:!0},setInterval(this.props.resetTranscript,1e3)),s.a.createElement("p",null,this.props.transcript)))):null}}]),n}(a.Component),x=(n(59),function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={msg:null},a}return Object(h.a)(n,[{key:"getDataFromChild",value:function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({msg:t});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement("div",{className:"BoxChat"},s.a.createElement(d.a,{maxWidth:"md",className:"relative"},s.a.createElement("div",{className:"row"},s.a.createElement(f.a,{style:{height:"100vh"}},s.a.createElement(g.a,{className:"TopToolbarChatbot"},s.a.createElement(v.a,{variant:"h6",color:"inherit"},"Chat")),s.a.createElement(E,{newMsg:this.state.msg}),s.a.createElement(B,{returnParent:this.getDataFromChild.bind(this)})))))}}]),n}(a.Component));var C=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(x,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[60,1,2]]]);
//# sourceMappingURL=main.4a3b54c2.chunk.js.map