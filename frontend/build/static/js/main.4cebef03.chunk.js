(this["webpackJsonpchatbot-react"]=this["webpackJsonpchatbot-react"]||[]).push([[0],{54:function(e,t,n){},55:function(e,t,n){},57:function(e,t,n){},62:function(e,t,n){},68:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var s=n(5),a=n(0),r=n(9),o=n.n(r),i=(n(54),n(55),n(11)),c=n.n(i),l=n(16),u=n(12),h=n(13),p=n(15),d=n(14),m=n(103),f=n(104),g=n(105),j=n(102),b=n(72),v=(n(57),function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"formatAlign",value:function(e){return"left"===e?"flex-start":"flex-end"}},{key:"render",value:function(){var e={background:this.props.isBot?"#ecf0f1":"#2e86de",color:this.props.isBot?"black":"white"};return Object(s.jsx)("div",{className:"Message",style:{alignSelf:this.formatAlign(this.props.align)},children:Object(s.jsx)(b.a,{className:"OneMessage",style:e,children:Object(s.jsx)("div",{className:"MessageContent",children:Object(s.jsx)(j.a,{component:"p",children:this.props.content})})})})}}]),n}(a.Component)),O=(n(62),function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(u.a)(this,n),(s=t.call(this,e)).scrollToBottom=function(){s.messagesEnd.scrollIntoView()},s.state={msgList:null},s}return Object(h.a)(n,[{key:"componentDidUpdate",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return setTimeout((function(){console.log("Waiting for render message")}),750),e.next=3,fetch("http://127.0.0.1:5000/api/v1/messages");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,this.setState({msgList:n.results});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://127.0.0.1:5000/api/v1/messages");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,console.log(n),this.setState({msgList:n.results}),this.scrollToBottom();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(s.jsx)("div",{className:"MessageContainer",children:Object(s.jsxs)("div",{className:"MessageList",children:[this.state.msgList?this.state.msgList.map((function(e,t){var n=!0===e.isBot?"left":"right";return Object(s.jsx)(v,{isBot:e.isBot,align:n,content:e.content},t)})):null,Object(s.jsx)("div",{style:{float:"left",clear:"both"},ref:function(t){e.messagesEnd=t}})]})})}}]),n}(a.Component)),y=n(29),x=n(17),w=n(26),S=(n(44),n(106)),k=n(19),T=n.n(k);n(68);var B=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(u.a)(this,n),(s=t.call(this)).state={message:"",alert:!0},s.handleEnter=s.handleEnter.bind(Object(x.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(x.a)(s)),s.onChange=s.onChange.bind(Object(x.a)(s)),s.handleButtonPress=s.handleButtonPress.bind(Object(x.a)(s)),s.handleButtonRelease=s.handleButtonRelease.bind(Object(x.a)(s)),s}return Object(h.a)(n,[{key:"handleSubmit",value:function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,this.setState({message:this.state.message.replace(/(\r\n|\n|\r)/gm,"")});case 3:if(""!==this.state.message){e.next=7;break}return e.abrupt("return");case 7:fetch("http://127.0.0.1:5000/api/v1/messages",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({content:this.state.message,isBot:!1,time:(new Date).getTime()/1e3})}).then((function(e){200===e.status?(console.log("Send message successfully"),e.json().then((function(e){console.log(e),fetch("http://127.0.0.1:5000/api/v1/messages/reply",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({content:e.content,isBot:!1,time:(new Date).getTime()/1e3})}).then((function(e){200===e.status?console.log("Wait for reply ..."):console.log("Some error occured")}))}))):console.log("Some error occured")})).then(this.setState({message:""}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleEnter",value:function(e){if(13===e.keyCode)return this.handleSubmit(e)}},{key:"onChange",value:function(e){this.setState(Object(y.a)({},e.target.name,e.target.value))}},{key:"handleButtonPress",value:function(){var e;this.state.alert?e=setTimeout((function(){return T.a.startListening({continuous:!0})}),200):clearTimeout(e)}},{key:"handleButtonRelease",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T.a.stopListening(),this.state.message=this.props.transcript,this.state.message===this.props.transcript){e.next=6;break}return e.abrupt("return");case 6:fetch("http://127.0.0.1:5000/api/v1/messages",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({content:this.state.message,isBot:!1,time:(new Date).getTime()/1e3})}).then((function(e){200===e.status?(console.log("Send message successfully"),e.json().then((function(e){console.log(e),fetch("http://127.0.0.1:5000/api/v1/messages/reply",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({content:e.content,isBot:!1,time:(new Date).getTime()/1e3})}).then((function(e){200===e.status?(console.log("Wait for reply ..."),t.props.resetTranscript()):(console.log("Some error occured"),t.props.resetTranscript())}))})),t.state.message=t.props.resetTranscript()):(console.log("Some error occured"),t.props.resetTranscript())})).then(this.setState({message:""})),this.props.resetTranscript();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return T.a.browserSupportsSpeechRecognition()||alert("Browser don't support Speech Recognation. If you want to use this feature please use following browsers : Microsoft Edge, Chrome, Android webview, Samsung Internet"),Object(s.jsx)("div",{className:"SendMessageForm",children:Object(s.jsx)("div",{className:"chat-input-width-100",children:Object(s.jsxs)("form",{className:"MessageForm",onKeyUp:this.handleEnter,children:[Object(s.jsx)("button",{className:"sender",type:"button",onClick:function(t){return e.handleSubmit(t)},children:Object(s.jsx)("img",{src:"send.png",alt:""})}),Object(s.jsx)(S.a,{name:"message",id:"outlined-multiline-static",fullWidth:!1,multiline:!0,rows:"4",value:this.state.message,placeholder:"Type something here",className:"chat-input",style:{width:"925px"},margin:"normal",variant:"outlined",onChange:this.onChange}),Object(s.jsx)("img",Object(w.a)(Object(w.a)({src:"voice.png",alt:"button"},this.props.longPress),{},{onTouchEnd:this.handleButtonRelease,onMouseUp:this.handleButtonRelease,onMouseLeave:this.handleButtonRelease,style:{height:"30px",width:"30px",marginTop:"15px"}}))]})})})}}]),n}(a.Component),C=(n(70),function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(u.a)(this,n),(s=t.call(this,e)).state={msg:null},s}return Object(h.a)(n,[{key:"getDataFromChild",value:function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({msg:t});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(s.jsx)("div",{className:"BoxChat",children:Object(s.jsx)(m.a,{maxWidth:"md",className:"relative",children:Object(s.jsx)("div",{className:"row",children:Object(s.jsxs)(f.a,{style:{height:"100vh"},children:[Object(s.jsx)(g.a,{className:"TopToolbarChatbot",children:Object(s.jsx)(j.a,{variant:"h6",color:"inherit",children:"Chat"})}),Object(s.jsx)(O,{newMsg:this.state.msg}),Object(s.jsx)(B,{returnParent:this.getDataFromChild.bind(this)})]})})})})}}]),n}(a.Component));var N=function(){return Object(s.jsx)("div",{className:"App",children:Object(s.jsx)(C,{})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(s.jsx)(N,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[71,1,2]]]);
//# sourceMappingURL=main.4cebef03.chunk.js.map