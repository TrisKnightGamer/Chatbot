(this["webpackJsonpchatbot-react"]=this["webpackJsonpchatbot-react"]||[]).push([[0],{38:function(e,t,n){e.exports=n(53)},43:function(e,t,n){},44:function(e,t,n){},46:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(7),o=n.n(r),i=(n(43),n(44),n(10)),c=n.n(i),l=n(15),u=n(11),m=n(12),h=n(14),p=n(13),f=n(81),g=n(82),d=n(83),v=n(80),b=n(54),y=(n(46),function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"formatAlign",value:function(e){return"left"===e?"flex-start":"flex-end"}},{key:"render",value:function(){var e={background:this.props.isBot?"#ecf0f1":"#2e86de",color:this.props.isBot?"black":"white"};return s.a.createElement("div",{className:"Message",style:{alignSelf:this.formatAlign(this.props.align)}},s.a.createElement(b.a,{className:"OneMessage",style:e},s.a.createElement("div",{className:"MessageContent"},s.a.createElement(v.a,{component:"p"},this.props.content))))}}]),n}(a.Component)),E=(n(50),function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).scrollToBottom=function(){a.messagesEnd.scrollIntoView()},a.state={msgList:null},a}return Object(m.a)(n,[{key:"componentDidUpdate",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return setTimeout((function(){console.log("Waiting for render message")}),750),e.next=3,fetch("http://192.168.1.253:5000/api/v1/messages");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,this.setState({msgList:n.results});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://192.168.1.253:5000/api/v1/messages");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,console.log(n),this.setState({msgList:n.results}),this.scrollToBottom();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"MessageContainer"},s.a.createElement("div",{className:"MessageList"},this.state.msgList?this.state.msgList.map((function(e,t){var n=!0===e.isBot?"left":"right";return s.a.createElement(y,{key:t,isBot:e.isBot,align:n,content:e.content})})):null,s.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(t){e.messagesEnd=t}})))}}]),n}(a.Component)),j=n(33),O=n(18),k=n(84),w=(n(51),function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={message:""},a.handleEnter=a.handleEnter.bind(Object(O.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(O.a)(a)),a.onChange=a.onChange.bind(Object(O.a)(a)),a}return Object(m.a)(n,[{key:"handleSubmit",value:function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,this.setState({message:this.state.message.replace(/(\r\n|\n|\r)/gm,"")});case 3:if(""!==this.state.message){e.next=7;break}return e.abrupt("return");case 7:fetch("http://192.168.1.253:5000/api/v1/messages",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({content:this.state.message,isBot:!1,time:(new Date).getTime()/1e3})}).then((function(e){200===e.status?(console.log("Send message successfully"),e.json().then((function(e){console.log(e),fetch("http://192.168.1.253:5000/api/v1/messages/reply",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({content:e.content,isBot:!1,time:(new Date).getTime()/1e3})}).then((function(e){200===e.status?console.log("Wait for reply ..."):console.log("Some error occured")}))}))):console.log("Some error occured")})).then(this.setState({message:""}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleEnter",value:function(e){if(13===e.keyCode)return this.handleSubmit(e)}},{key:"onChange",value:function(e){this.setState(Object(j.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"SendMessageForm"},s.a.createElement("div",{className:"chat-input-width-100"},s.a.createElement("form",{className:"MessageForm",onKeyUp:this.handleEnter},s.a.createElement("button",{className:"sender",type:"button",onClick:function(t){return e.handleSubmit(t)}},s.a.createElement("img",{src:"/assets/img/send-button.png",alt:""})),s.a.createElement(k.a,{name:"message",id:"outlined-multiline-static",fullWidth:!0,multiline:!0,rows:"4",value:this.state.message,placeholder:"Type something here",className:"chat-input",margin:"normal",variant:"outlined",onChange:this.onChange}))))}}]),n}(a.Component)),C=(n(52),function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={msg:null},a}return Object(m.a)(n,[{key:"getDataFromChild",value:function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({msg:t});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement("div",{className:"BoxChat"},s.a.createElement(f.a,{maxWidth:"md",className:"relative"},s.a.createElement("div",{className:"row"},s.a.createElement(g.a,{style:{height:"100vh"}},s.a.createElement(d.a,{className:"TopToolbarChatbot"},s.a.createElement(v.a,{variant:"h6",color:"inherit"},"Chat")),s.a.createElement(E,{newMsg:this.state.msg}),s.a.createElement(w,{returnParent:this.getDataFromChild.bind(this)})))))}}]),n}(a.Component));var S=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(C,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[38,1,2]]]);
//# sourceMappingURL=main.ed588371.chunk.js.map