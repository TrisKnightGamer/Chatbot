{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Trihd\\\\OneDrive\\\\chatbot_NEW\\\\frontend\\\\src\\\\components\\\\SendMessageForm\\\\index.js\";\nimport React, { Component } from 'react';\nimport { TextField } from \"@material-ui/core\";\nimport SpeechRecognition, { useSpeechRecognition } from 'react-speech-recognition'; // import Icon  from \"@material-ui/icons\";\n\nimport './style.css';\n\nfunction Hook(Component) {\n  var _s = $RefreshSig$();\n\n  return _s(function WrappedComponent(props) {\n    _s();\n\n    const transcript = useSpeechRecognition();\n    const resetTranscript = useSpeechRecognition();\n    return /*#__PURE__*/React.createElement(Component, Object.assign({}, props, {\n      transcript: transcript,\n      resetTranscript: resetTranscript,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 11,\n        columnNumber: 14\n      }\n    }));\n  }, \"YdP25QslI9PgH1m7L4inIVhbaNU=\", false, function () {\n    return [useSpeechRecognition, useSpeechRecognition];\n  });\n}\n\n_c = Hook;\nexport default class SendMessageForm extends Component {\n  constructor(props) {\n    super();\n    this.state = {\n      message: \"\",\n      alert: true\n    };\n    this.handleEnter = this.handleEnter.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.onChange = this.onChange.bind(this);\n    this.handleButtonPress = this.handleButtonPress.bind(this);\n    this.handleButtonRelease = this.handleButtonRelease.bind(this);\n  }\n\n  async handleSubmit(e) {\n    e.preventDefault();\n    await this.setState({\n      message: this.state.message.replace(/(\\r\\n|\\n|\\r)/gm, \"\")\n    });\n\n    if (this.state.message === \"\") {\n      return;\n    } else {\n      fetch('http://0.0.0.0:5000/api/v1/messages', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Accept: 'application/json'\n        },\n        body: JSON.stringify({\n          content: this.state.message,\n          isBot: false,\n          time: new Date().getTime() / 1000\n        })\n      }).then(res => {\n        if (res.status === 200) {\n          console.log(\"Send message successfully\");\n          res.json().then(postResponse => {\n            console.log(postResponse);\n            fetch('http://0.0.0.0:5000/api/v1/messages/reply', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json',\n                Accept: 'application/json'\n              },\n              body: JSON.stringify({\n                content: postResponse.content,\n                isBot: false,\n                time: new Date().getTime() / 1000\n              })\n            }).then(res => {\n              if (res.status === 200) {\n                console.log(\"Wait for reply ...\");\n              } else {\n                console.log(\"Some error occured\");\n              }\n            });\n          });\n        } else {\n          console.log(\"Some error occured\");\n        }\n      }).then(this.setState({\n        message: \"\"\n      }));\n    }\n  }\n\n  handleEnter(e) {\n    if (e.keyCode === 13) {\n      return this.handleSubmit(e);\n    }\n\n    return;\n  }\n\n  onChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  }\n\n  handleButtonPress() {\n    let buttonPressTimer;\n\n    if (this.state.alert) {\n      buttonPressTimer = setTimeout(() => SpeechRecognition.startListening({\n        continuous: true\n      }), 200);\n    } else {\n      clearTimeout(buttonPressTimer);\n    }\n  }\n\n  handleButtonRelease() {\n    this.setState({\n      alert: false\n    });\n  }\n\n  render() {\n    if (!SpeechRecognition.browserSupportsSpeechRecognition()) {\n      return null;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"SendMessageForm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"chat-input-width-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"MessageForm\",\n      onKeyUp: this.handleEnter,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      name: \"message\",\n      id: \"outlined-multiline-static\",\n      fullWidth: false,\n      multiline: true,\n      rows: \"4\",\n      value: this.state.message,\n      placeholder: \"Type something here\",\n      className: \"chat-input\",\n      style: {\n        width: \"925px\"\n      },\n      margin: \"normal\",\n      variant: \"outlined\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"img\", {\n      src: \"voice.png\",\n      alt: \"button\",\n      onTouchStart: this.handleButtonPress,\n      onTouchEnd: SpeechRecognition.stopListening,\n      onMouseDown: this.handleButtonPress,\n      onMouseUp: SpeechRecognition.stopListening,\n      onMouseLeave: SpeechRecognition.stopListening,\n      style: {\n        height: 30 + 'px',\n        width: 30 + 'px',\n        marginTop: 15 + 'px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      hidden: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 25\n      }\n    }, this.props.transcript, setInterval(this.props.resetTranscript, 1000)))));\n  }\n\n}\n\nvar _c;\n\n$RefreshReg$(_c, \"Hook\");","map":{"version":3,"sources":["C:/Users/Trihd/OneDrive/chatbot_NEW/frontend/src/components/SendMessageForm/index.js"],"names":["React","Component","TextField","SpeechRecognition","useSpeechRecognition","Hook","WrappedComponent","props","transcript","resetTranscript","SendMessageForm","constructor","state","message","alert","handleEnter","bind","handleSubmit","onChange","handleButtonPress","handleButtonRelease","e","preventDefault","setState","replace","fetch","method","headers","Accept","body","JSON","stringify","content","isBot","time","Date","getTime","then","res","status","console","log","json","postResponse","keyCode","target","name","value","buttonPressTimer","setTimeout","startListening","continuous","clearTimeout","render","browserSupportsSpeechRecognition","width","stopListening","height","marginTop","setInterval"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport {TextField} from \"@material-ui/core\";\nimport SpeechRecognition, { useSpeechRecognition } from 'react-speech-recognition'\n// import Icon  from \"@material-ui/icons\";\nimport './style.css'\n\nfunction Hook(Component) {\n    return function WrappedComponent(props) {\n      const transcript = useSpeechRecognition()\n      const resetTranscript = useSpeechRecognition()\n      return <Component {...props} transcript={transcript} resetTranscript={resetTranscript} />;\n    }\n}\n\n\n\nexport default class SendMessageForm extends Component  {\n    constructor(props) {\n        super();\n        this.state = {\n            message: \"\",\n            alert:true\n        }\n        this.handleEnter = this\n            .handleEnter\n            .bind(this)\n        this.handleSubmit = this\n            .handleSubmit\n            .bind(this)\n        this.onChange = this\n            .onChange\n            .bind(this)\n        this.handleButtonPress = this\n            .handleButtonPress\n            .bind(this)\n        this.handleButtonRelease = this\n            .handleButtonRelease\n            .bind(this)\n    }\n    async handleSubmit(e) {\n        e.preventDefault()\n        await this.setState({\n            message: this\n                .state\n                .message\n                .replace(/(\\r\\n|\\n|\\r)/gm, \"\")\n        })\n\n        if (this.state.message === \"\") {\n            return\n        } else {\n            fetch('http://0.0.0.0:5000/api/v1/messages', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    Accept: 'application/json'\n                },\n                body: JSON.stringify({\n                    content: this.state.message,\n                    isBot: false,\n                    time: (new Date().getTime()) / 1000\n                })\n            }).then(res => {\n                if (res.status === 200) {\n                    console.log(\"Send message successfully\")\n                    res\n                        .json()\n                        .then(postResponse => {\n                            console.log(postResponse);\n                            \n                            fetch('http://0.0.0.0:5000/api/v1/messages/reply', {\n                                method: 'POST',\n                                headers: {\n                                    'Content-Type': 'application/json',\n                                    Accept: 'application/json'\n                                },\n                                body: JSON.stringify({\n                                    content: postResponse.content,\n                                    isBot: false,\n                                    time: (new Date().getTime()) / 1000\n                                })\n                            }).then(res => {\n                                if (res.status === 200) {\n                                    console.log(\"Wait for reply ...\")\n                                } else {\n                                    console.log(\"Some error occured\");\n\n                                }\n                            })\n                        })\n\n                } else {\n                    console.log(\"Some error occured\");\n                }\n            }).then(this.setState({message: \"\"}))\n\n        }\n\n    }\n    handleEnter(e) {\n        if (e.keyCode === 13) {\n            return this.handleSubmit(e)\n        }\n        return\n    }\n    onChange(e) {\n        this.setState({\n            [e.target.name]: e.target.value\n        });\n    }\n    handleButtonPress () {\n        let buttonPressTimer\n        if(this.state.alert){\n            buttonPressTimer = setTimeout(() => SpeechRecognition.startListening({continuous: true }), 200);\n        }\n        else{\n            clearTimeout(buttonPressTimer);\n        }\n    }\n    \n    handleButtonRelease () {\n\n        this.setState({\n            alert:false\n        })\n    }\n\n    render() {\n        if (!SpeechRecognition.browserSupportsSpeechRecognition()) {\n            return null\n        }\n        return (\n            <div className=\"SendMessageForm\">\n                <div className=\"chat-input-width-100\">\n                    <form className=\"MessageForm\" onKeyUp={this.handleEnter}>\n                        <TextField\n                            name=\"message\"\n                            id=\"outlined-multiline-static\"\n                            fullWidth={false}\n                            multiline\n                            rows=\"4\"\n                            value={this.state.message}\n                            placeholder=\"Type something here\"\n                            className=\"chat-input\"\n                            style={{\n                                width:\"925px\"\n                            }}\n                            margin=\"normal\"\n                            variant=\"outlined\"\n                            onChange={this.onChange}/>   \n                        <img src=\"voice.png\" alt=\"button\" onTouchStart={this.handleButtonPress} \n                                onTouchEnd={SpeechRecognition.stopListening} \n                                onMouseDown={this.handleButtonPress} \n                                onMouseUp={SpeechRecognition.stopListening} \n                                onMouseLeave={SpeechRecognition.stopListening} style={{height:30+'px', width:30+'px', marginTop:15+'px'}}/>\n                        <p hidden>\n                            {this.props.transcript}\n                            {setInterval(this.props.resetTranscript,1000)}\n                        </p>\n                    </form>\n                </div>\n            </div>\n        )\n    }\n}\n\n"]},"metadata":{},"sourceType":"module"}