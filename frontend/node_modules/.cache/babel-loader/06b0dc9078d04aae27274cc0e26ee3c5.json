{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Trihd\\\\OneDrive\\\\chatbot_NEW\\\\frontend\\\\src\\\\components\\\\SendMessageForm\\\\index.js\";\nimport React, { Component } from 'react';\nimport { TextField } from \"@material-ui/core\"; //import useLongPress from \"./useLongPress\";\n//import SpeechRecognition, { useSpeechRecognition } from 'react-speech-recognition'\n// import Icon  from \"@material-ui/icons\";\n\nimport './style.css';\nexport default class SendMessageForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      message: \"\",\n      alert: true\n    };\n    this.handleEnter = this.handleEnter.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.onChange = this.onChange.bind(this);\n    this.handleButtonPress = this.handleButtonPress.bind(this);\n    this.handleButtonRelease = this.handleButtonRelease.bind(this);\n  }\n\n  async handleSubmit(e) {\n    e.preventDefault();\n    await this.setState({\n      message: this.state.message.replace(/(\\r\\n|\\n|\\r)/gm, \"\")\n    });\n\n    if (this.state.message === \"\") {\n      return;\n    } else {\n      fetch('http://192.168.1.253:5000/api/v1/messages', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Accept: 'application/json'\n        },\n        body: JSON.stringify({\n          content: this.state.message,\n          isBot: false,\n          time: new Date().getTime() / 1000\n        })\n      }).then(res => {\n        if (res.status === 200) {\n          console.log(\"Send message successfully\");\n          res.json().then(postResponse => {\n            console.log(postResponse);\n            fetch('http://192.168.1.253:5000/api/v1/messages/reply', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json',\n                Accept: 'application/json'\n              },\n              body: JSON.stringify({\n                content: postResponse.content,\n                isBot: false,\n                time: new Date().getTime() / 1000\n              })\n            }).then(res => {\n              if (res.status === 200) {\n                console.log(\"Wait for reply ...\");\n              } else {\n                console.log(\"Some error occured\");\n              }\n            });\n          });\n        } else {\n          console.log(\"Some error occured\");\n        }\n      }).then(this.setState({\n        message: \"\"\n      }));\n    }\n  }\n\n  handleEnter(e) {\n    if (e.keyCode === 13) {\n      return this.handleSubmit(e);\n    }\n\n    return;\n  }\n\n  onChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  }\n\n  handleButtonPress() {\n    let buttonPressTimer;\n\n    if (this.state.alert) {\n      buttonPressTimer = setTimeout(e => this.handleSubmit(e), 300);\n    } else {\n      clearTimeout(buttonPressTimer);\n    }\n  }\n\n  handleButtonRelease() {\n    this.setState({\n      alert: false\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"SendMessageForm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"chat-input-width-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"MessageForm\",\n      onKeyUp: this.handleEnter,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"sender\",\n      type: \"button\",\n      onClick: e => this.handleSubmit(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"/assets/img/send-button.png\",\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(TextField, {\n      name: \"message\",\n      id: \"outlined-multiline-static\",\n      fullWidth: true,\n      multiline: true,\n      rows: \"4\",\n      value: this.state.message,\n      placeholder: \"Type something here\",\n      className: \"chat-input\",\n      margin: \"normal\",\n      variant: \"outlined\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      onTouchStart: this.handleButtonPress,\n      onTouchEnd: this.handleButtonRelease,\n      onMouseDown: this.handleButtonPress,\n      onMouseUp: this.handleButtonRelease,\n      onMouseLeave: this.handleButtonRelease,\n      className: \"voice\",\n      type: \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 25\n      }\n    }))));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/Trihd/OneDrive/chatbot_NEW/frontend/src/components/SendMessageForm/index.js"],"names":["React","Component","TextField","SendMessageForm","constructor","props","state","message","alert","handleEnter","bind","handleSubmit","onChange","handleButtonPress","handleButtonRelease","e","preventDefault","setState","replace","fetch","method","headers","Accept","body","JSON","stringify","content","isBot","time","Date","getTime","then","res","status","console","log","json","postResponse","keyCode","target","name","value","buttonPressTimer","setTimeout","clearTimeout","render"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport {TextField} from \"@material-ui/core\";\n//import useLongPress from \"./useLongPress\";\n//import SpeechRecognition, { useSpeechRecognition } from 'react-speech-recognition'\n// import Icon  from \"@material-ui/icons\";\nimport './style.css'\nexport default class SendMessageForm extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            message: \"\",\n            alert:true\n        }\n        this.handleEnter = this\n            .handleEnter\n            .bind(this)\n        this.handleSubmit = this\n            .handleSubmit\n            .bind(this)\n        this.onChange = this\n            .onChange\n            .bind(this)\n        this.handleButtonPress = this\n            .handleButtonPress\n            .bind(this)\n        this.handleButtonRelease = this\n            .handleButtonRelease\n            .bind(this)\n    }\n    async handleSubmit(e) {\n        e.preventDefault()\n        await this.setState({\n            message: this\n                .state\n                .message\n                .replace(/(\\r\\n|\\n|\\r)/gm, \"\")\n        })\n\n        if (this.state.message === \"\") {\n            return\n        } else {\n            fetch('http://192.168.1.253:5000/api/v1/messages', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    Accept: 'application/json'\n                },\n                body: JSON.stringify({\n                    content: this.state.message,\n                    isBot: false,\n                    time: (new Date().getTime()) / 1000\n                })\n            }).then(res => {\n                if (res.status === 200) {\n                    console.log(\"Send message successfully\")\n                    res\n                        .json()\n                        .then(postResponse => {\n                            console.log(postResponse);\n                            \n                            fetch('http://192.168.1.253:5000/api/v1/messages/reply', {\n                                method: 'POST',\n                                headers: {\n                                    'Content-Type': 'application/json',\n                                    Accept: 'application/json'\n                                },\n                                body: JSON.stringify({\n                                    content: postResponse.content,\n                                    isBot: false,\n                                    time: (new Date().getTime()) / 1000\n                                })\n                            }).then(res => {\n                                if (res.status === 200) {\n                                    console.log(\"Wait for reply ...\")\n                                } else {\n                                    console.log(\"Some error occured\");\n\n                                }\n                            })\n                        })\n\n                } else {\n                    console.log(\"Some error occured\");\n                }\n            }).then(this.setState({message: \"\"}))\n\n        }\n\n    }\n    handleEnter(e) {\n        if (e.keyCode === 13) {\n            return this.handleSubmit(e)\n        }\n        return\n    }\n    onChange(e) {\n        this.setState({\n            [e.target.name]: e.target.value\n        });\n    }\n    handleButtonPress () {\n        let buttonPressTimer\n        if(this.state.alert){\n            buttonPressTimer = setTimeout((e) => this.handleSubmit(e), 300);\n        }\n        else{\n            clearTimeout(buttonPressTimer);\n        }\n    }\n    \n    handleButtonRelease () {\n        this.setState({\n            alert:false\n        })\n    }\n    render() {\n        return (\n            <div className=\"SendMessageForm\">\n                <div className=\"chat-input-width-100\">\n                    <form className=\"MessageForm\" onKeyUp={this.handleEnter}>\n                        <button className=\"sender\" type=\"button\" onClick={(e) => this.handleSubmit(e)}>\n                            <img src=\"/assets/img/send-button.png\" alt=\"\"/>\n                        </button>\n                        <TextField\n                            name=\"message\"\n                            id=\"outlined-multiline-static\"\n                            fullWidth={true}\n                            multiline\n                            rows=\"4\"\n                            value={this.state.message}\n                            placeholder=\"Type something here\"\n                            className=\"chat-input\"\n                            margin=\"normal\"\n                            variant=\"outlined\"\n                            onChange={this.onChange}/>   \n                        <button onTouchStart={this.handleButtonPress} \n                                onTouchEnd={this.handleButtonRelease} \n                                onMouseDown={this.handleButtonPress} \n                                onMouseUp={this.handleButtonRelease} \n                                onMouseLeave={this.handleButtonRelease} \n                                className=\"voice\" type=\"button\">\n                        </button>\n                    </form>\n                </div>\n            </div>\n        )\n    }\n}\n\n"]},"metadata":{},"sourceType":"module"}