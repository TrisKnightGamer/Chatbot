{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\Trihd\\\\OneDrive\\\\chatbot_NEW\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"C:\\\\Users\\\\Trihd\\\\OneDrive\\\\chatbot_NEW\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Trihd\\\\OneDrive\\\\chatbot_NEW\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\Users\\\\Trihd\\\\OneDrive\\\\chatbot_NEW\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Trihd\\\\OneDrive\\\\chatbot_NEW\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\Trihd\\\\OneDrive\\\\chatbot_NEW\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\Trihd\\\\OneDrive\\\\chatbot_NEW\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\Trihd\\\\OneDrive\\\\chatbot_NEW\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{TextField}from\"@material-ui/core\";// import Icon  from \"@material-ui/icons\";\nimport'./style.css';var SendMessageForm=/*#__PURE__*/function(_Component){_inherits(SendMessageForm,_Component);var _super=_createSuper(SendMessageForm);function SendMessageForm(props){var _this;_classCallCheck(this,SendMessageForm);_this=_super.call(this,props);_this.state={message:\"\"};_this.handleEnter=_this.handleEnter.bind(_assertThisInitialized(_this));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));_this.onChange=_this.onChange.bind(_assertThisInitialized(_this));return _this;}_createClass(SendMessageForm,[{key:\"handleSubmit\",value:function(){var _handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return this.setState({message:this.state.message.replace(/(\\r\\n|\\n|\\r)/gm,\"\")});case 3:if(!(this.state.message===\"\")){_context.next=7;break;}return _context.abrupt(\"return\");case 7:fetch('http://localhost:5000/api/v1/messages',{method:'POST',headers:{'Content-Type':'application/json',Accept:'application/json'},body:JSON.stringify({content:this.state.message,isBot:false,time:new Date().getTime()/1000})}).then(function(res){if(res.status===200){console.log(\"Send message successfully\");res.json().then(function(postResponse){console.log(postResponse);fetch('http://192.168.1.253:5000/api/v1/messages/reply',{method:'POST',headers:{'Content-Type':'application/json',Accept:'application/json'},body:JSON.stringify({content:postResponse.content,isBot:false,time:new Date().getTime()/1000})}).then(function(res){if(res.status===200){console.log(\"Wait for reply ...\");}else{console.log(\"Some error occured\");}});});}else{console.log(\"Some error occured\");}}).then(this.setState({message:\"\"}));case 8:case\"end\":return _context.stop();}}},_callee,this);}));function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}return handleSubmit;}()},{key:\"handleEnter\",value:function handleEnter(e){if(e.keyCode===13){return this.handleSubmit(e);}return;}},{key:\"onChange\",value:function onChange(e){this.setState(_defineProperty({},e.target.name,e.target.value));}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"SendMessageForm\"},/*#__PURE__*/React.createElement(\"div\",{className:\"chat-input-width-100\"},/*#__PURE__*/React.createElement(\"form\",{className:\"MessageForm\",onKeyUp:this.handleEnter},/*#__PURE__*/React.createElement(\"button\",{className:\"sender\",type:\"button\",onClick:function onClick(e){return _this2.handleSubmit(e);}},/*#__PURE__*/React.createElement(\"img\",{src:\"/assets/img/send-button.png\",alt:\"\"})),/*#__PURE__*/React.createElement(TextField,{name:\"message\",id:\"outlined-multiline-static\",fullWidth:true,multiline:true,rows:\"4\",value:this.state.message,placeholder:\"Type something here\",className:\"chat-input\",margin:\"normal\",variant:\"outlined\",onChange:this.onChange}))));}}]);return SendMessageForm;}(Component);export{SendMessageForm as default};","map":{"version":3,"sources":["C:/Users/Trihd/OneDrive/chatbot_NEW/frontend/src/components/SendMessageForm/index.js"],"names":["React","Component","TextField","SendMessageForm","props","state","message","handleEnter","bind","handleSubmit","onChange","e","preventDefault","setState","replace","fetch","method","headers","Accept","body","JSON","stringify","content","isBot","time","Date","getTime","then","res","status","console","log","json","postResponse","keyCode","target","name","value"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport {TextField} from \"@material-ui/core\";\n// import Icon  from \"@material-ui/icons\";\nimport './style.css'\nexport default class SendMessageForm extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            message: \"\"\n        }\n        this.handleEnter = this\n            .handleEnter\n            .bind(this)\n        this.handleSubmit = this\n            .handleSubmit\n            .bind(this)\n        this.onChange = this\n            .onChange\n            .bind(this)\n    }\n    async handleSubmit(e) {\n        e.preventDefault()\n        await this.setState({\n            message: this\n                .state\n                .message\n                .replace(/(\\r\\n|\\n|\\r)/gm, \"\")\n        })\n\n        if (this.state.message === \"\") {\n            return\n        } else {\n            fetch('http://localhost:5000/api/v1/messages', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    Accept: 'application/json'\n                },\n                body: JSON.stringify({\n                    content: this.state.message,\n                    isBot: false,\n                    time: (new Date().getTime()) / 1000\n                })\n            }).then(res => {\n                if (res.status === 200) {\n                    console.log(\"Send message successfully\")\n                    res\n                        .json()\n                        .then(postResponse => {\n                            console.log(postResponse);\n                            \n                            fetch('http://192.168.1.253:5000/api/v1/messages/reply', {\n                                method: 'POST',\n                                headers: {\n                                    'Content-Type': 'application/json',\n                                    Accept: 'application/json'\n                                },\n                                body: JSON.stringify({\n                                    content: postResponse.content,\n                                    isBot: false,\n                                    time: (new Date().getTime()) / 1000\n                                })\n                            }).then(res => {\n                                if (res.status === 200) {\n                                    console.log(\"Wait for reply ...\")\n                                } else {\n                                    console.log(\"Some error occured\");\n\n                                }\n                            })\n                        })\n\n                } else {\n                    console.log(\"Some error occured\");\n                }\n            }).then(this.setState({message: \"\"}))\n\n        }\n\n    }\n    handleEnter(e) {\n        if (e.keyCode === 13) {\n            return this.handleSubmit(e)\n        }\n        return\n    }\n    onChange(e) {\n        this.setState({\n            [e.target.name]: e.target.value\n        });\n    }\n    render() {\n        return (\n            <div className=\"SendMessageForm\">\n                <div className=\"chat-input-width-100\">\n                    <form className=\"MessageForm\" onKeyUp={this.handleEnter}>\n                        <button className=\"sender\" type=\"button\" onClick={(e) => this.handleSubmit(e)}>\n                            <img src=\"/assets/img/send-button.png\" alt=\"\"/>\n                        </button>\n                        <TextField\n                            name=\"message\"\n                            id=\"outlined-multiline-static\"\n                            fullWidth={true}\n                            multiline\n                            rows=\"4\"\n                            value={this.state.message}\n                            placeholder=\"Type something here\"\n                            className=\"chat-input\"\n                            margin=\"normal\"\n                            variant=\"outlined\"\n                            onChange={this.onChange}/>\n                    </form>\n                </div>\n            </div>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}